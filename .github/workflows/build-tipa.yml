name: Build TrollSpeed (.tipa for TrollStore) on: push: 
    branches: [ main ]
  workflow_dispatch: jobs: build: runs-on: macos-latest 
    steps:
      - name: Checkout repository uses: actions/checkout@v4 
      - name: Install dependencies
        run: | brew install make dpkg ldid git - name: Setup 
      THEOS
        run: | git clone --recursive 
          https://github.com/theos/theos $HOME/theos git 
          clone https://github.com/theos/sdks 
          $HOME/theos/sdks echo "THEOS=$HOME/theos" >> 
          $GITHUB_ENV echo "PATH=$HOME/theos/bin:$PATH" >> 
          $GITHUB_ENV
      - name: Build project with Theos run: | make clean 
          make package FINALPACKAGE=1
      - name: Create .tipa from .app (if exists) run: | 
          APP_PATH=$(find .theos -type d -name "*.app" | 
          head -n 1 || true) if [ -n "$APP_PATH" ]; then
            mkdir -p build/Payload cp -R "$APP_PATH" 
            build/Payload/ (cd build && zip -qry 
            TrollSpeed.tipa Payload)
          else echo "No .app found â€” likely a tweak; 
            skipping .tipa."
          fi - name: Upload .tipa artifact uses: 
        actions/upload-artifact@v4 with:
          name: TrollSpeed-tipa path: build/*.tipa 
          if-no-files-found: ignore
      - name: Upload .deb artifact uses: 
        actions/upload-artifact@v4 with:
          name: TrollSpeed-deb path: .theos/*.deb 
          if-no-files-found: warn
